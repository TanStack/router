# Internationalization (i18n)

Patterns for multi-language routing.

## URL-Based Locale

```tsx
// routes/$locale/index.tsx
export const Route = createFileRoute('/$locale/')({
  params: {
    parse: (params) => ({
      locale: ['en', 'es', 'fr', 'de'].includes(params.locale)
        ? params.locale
        : 'en',
    }),
    stringify: (params) => params,
  },
  component: Home,
})

function Home() {
  const { locale } = Route.useParams()
  return <div>Current locale: {locale}</div>
}
```

## Locale in Search Params

```tsx
const searchSchema = z.object({
  lang: z.enum(['en', 'es', 'fr']).default('en'),
})

export const Route = createFileRoute('/')({
  validateSearch: searchSchema,
})

function App() {
  const { lang } = Route.useSearch()
  const navigate = useNavigate()

  return (
    <select
      value={lang}
      onChange={(e) => navigate({ search: { lang: e.target.value } })}
    >
      <option value="en">English</option>
      <option value="es">Espa√±ol</option>
    </select>
  )
}
```

## Locale Context

```tsx
// Provide locale via router context
const router = createRouter({
  routeTree,
  context: {
    locale: 'en',
    t: (key: string) => translations['en'][key],
  },
})

// Update context based on route
export const Route = createFileRoute('/$locale')({
  beforeLoad: ({ params, context }) => {
    return {
      locale: params.locale,
      t: (key: string) => translations[params.locale][key],
    }
  },
})
```

## Redirects for Default Locale

```tsx
export const Route = createFileRoute('/')({
  beforeLoad: ({ context }) => {
    const preferredLocale = detectLocale() // From headers/cookies
    throw redirect({ to: '/$locale', params: { locale: preferredLocale } })
  },
})
```

## Link with Locale

```tsx
function LocaleLink({ to, children, ...props }) {
  const { locale } = Route.useParams()

  return (
    <Link to={`/${locale}${to}`} {...props}>
      {children}
    </Link>
  )
}
```
